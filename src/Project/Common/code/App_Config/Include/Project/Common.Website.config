<?xml version="1.0"?>

<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
    <coveo>
      <defaultIndexConfiguration>
        <fieldMap>
          <externalFields hint="raw:AddExternalField">
            <!-- The field syslanguage is added as it is generated by the Coveo Cloud platform and is shared across all sources, including external ones.
                 It is used in a facet of the Coveo serch interface. -->
            <field fieldName="syslanguage"/>
          </externalFields>
          <fieldNames hint="raw:AddFieldByFieldName">
            <!-- Used as the source of query suggestions in the Coveo searchbox view -->
            <fieldType fieldName="displayname" isFacet="true" settingType="Coveo.Framework.Configuration.FieldConfiguration, Coveo.Framework" />
          </fieldNames>
        </fieldMap>
        <documentOptions>
          <fields hint="raw:AddComputedIndexField">
            <field fieldName="imageUrl" sourceField="image">Coveo.SearchProvider.ComputedFields.ImageUrlComputedField, Coveo.SearchProviderBase</field>
            <field fieldName="imageAlt" sourceField="image">Coveo.SearchProvider.ComputedFields.ImageAltComputedField, Coveo.SearchProviderBase</field>
          </fields>
        </documentOptions>
      </defaultIndexConfiguration>
    </coveo>
    <contentSearch>
      <configuration>
        <indexes>
          <index id="Coveo_master_index">
            <patch:delete/>
          </index>
          <index id="Coveo_web_index">
            <patch:delete/>
          </index>
        </indexes>
      </configuration>
    </contentSearch>
    <sc.variable name="rootHostName" value="Coveo.dev.local" />
    <settings>
      <setting name="Analytics.CookieDomain" value="$(rootHostName)" />
    </settings>
    <events>
      <event name="publish:end">
        <handler type="Sitecore.Publishing.HtmlCacheClearer, Sitecore.Kernel" method="ClearCache">
          <sites hint="list">
            <site>
              <patch:delete/>
            </site>
          </sites>
        </handler>
      </event>
      <event name="publish:end:remote">
        <handler type="Sitecore.Publishing.HtmlCacheClearer, Sitecore.Kernel" method="ClearCache">
          <sites hint="list">
            <site>
              <patch:delete/>
            </site>
          </sites>
        </handler>
      </event>
    </events>
    <sites>
      <site name="website">
        <patch:delete/>
      </site>
    </sites>
    <cacheSizes>
      <sites>
        <website>
          <patch:delete />
        </website>
      </sites>
    </cacheSizes>
  </sitecore>
</configuration>
